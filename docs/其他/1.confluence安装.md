---
# 这是页面的图标
icon: api
# 这是文章的标题
title: 创建并破解confluence和markdown插件
# 设置作者
author: lhz
# 设置写作时间
time: 2022-04-14
# 一个页面只能有一个分类
category: 其他
# 一个页面可以有多个标签
tag:
  - confluence
comment: false
typora-root-url: ..\..\..\.vuepress\public
---

## 安装confluence
1.安装postgresql
``` bash
docker run --name postgresdb -p 5432:5432 -e POSTGRES_PASSWORD=W**** -d postgres
```
2.安装confluence
``` bash
docker run -d --name confluence -p 80:8090 --link postgresdb:db --user root:root cptactionhank/atlassian-confluence:latest
```
3.下载破解agent
```
https://gitee.com/pengzhile/atlassian-agent/releases/v1.3.1
```
4.将破解agent拷入confluence docker
``` bash
docker cp atlassian-agent.jar confluence:/home/
docker exec -it confluence /bin/bash
echo 'export CATALINA_OPTS="-javaagent:/home/atlassian-agent.jar ${CATALINA_OPTS}"' >> /opt/atlassian/confluence/bin/setenv.sh
```
5.重启confluence docker
```
docker restart confluence
```
6.通过web访问confluence，获取授权id
7.利用破解agent生成授权码
```
java -jar atlassian-agent.jar -m admin@admin.com -n BAT -p conf -o http://127.0.0.1 -s BKDV-5HWF-N82F-JQB7
```
8.完成剩余安装
## 安装markdown破解插件
```
java -jar atlassian-agent.jar -m admin@admin.com -n BAT -p 'mohamicorp-render-markdown' -o http://127.0.0.1 -s BKDV-5HWF-N82F-JQB7
```

9.问题解决
## 修复word文档预览显示不了中文
 参见https://www.cnblogs.com/lei0213/p/10941715.html